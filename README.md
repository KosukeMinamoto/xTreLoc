
# xTreLoc

## X-correlation-based Tremor Re-location Tools

xTreLoc is a Java-based program for (re)locating the hypocenters of earthquakes by optimizing lag-time. For more info., pls see `demo/docx/demo_jp.pdf`.

## Directory structure

- README: This file
- LICENSE: A file containing the license (Apache 2.0)
- pom.xml: A file referenced during compilation with Maven
- build.gradle: A file referenced during compilation with Gradle
- src: Containing source codes
- target: Precompiled binaries generated by Maven
- demo: Containing files for synthetic testing

## Requirements

This program is developed using java ver. 20.0.2, and requires these:

- Java
- Maven / Gradle

## Installation

We provide precompiled binaries, but you can recompile them using Maven or Gradle. In that case, please execute the following commands:

- Maven
	```sh
	mvn clean package
	```

- Gradle
	```sh
	gradle clean build
	```

	This project uses Gradle Wrapper (gradlew) to ensure a consistent build environment. Follow the steps below to compile and run the application.	To compile the project, run:

	For macOS/Linux:
	```
	./gradlew build
	```

	For Windows:
	```
	gradlew.bat build
	```

	If you run the application, execute the following command:

	```
	./gradlew run <mode>
	```

	If you prefer to run the compiled JAR file directly:
	```
	./gradlew jar
	java -jar build/libs/xtreloc-1.0-SNAPSHOT.jar <mode>
	```

These commands have been confirmed to work in the following environments:
- Mac (Apple M1, Sonoma 14.5)
- Linux (Ubunts)
<!-- - Windows (Intel) -->

## Usage

Once built, you can execute the program using the following command:

```sh
java -jar /path/to/jarfile MODE
```

You can choose following modes:

- **GRD**: Determines hypocenters using the Grid Search algorithm.
- **STD**: Determines hypocenters using the Station-Pair Double Difference method
- **CLS**: Performs spatial clustering of hypocenters and generates `trip_diff_<CID>.csv` for TRP mode
- **TRD**: Re-determines hypocenters using the Triple Difference method
- **SYN**: Creates detasets for synthetic test.
- **MAP**: Plots the epicentral distribution with ease.

## Sample Workflow

To use xTreLoc in a complete workflow, follow these steps:

1. Run **SYN** mode to generate `dat` files
1. Run **STD** mode to determine individual hypocenters using the Staton-pair DD method
1. Run **CLS** mode to perform spatial clustering and generate `triple_diff_<CID>.csv`
1. Run **TRD** mode to re-determine hypocenters using the Triple Difference method

All necessary files for this workflow are stored in the `demo` directory.

## License

This project is licensed under the Apache License 2.0. See the LICENSE file for details.

## Version

- **Current Version:** 1-SNAPSHOT (Feb. 26th, 2025)

## Contact

If you have any bug reports or improvement suggestions, please feel free to contact:

- **Email:** [kosuke.minamoto.s8[at]gmail.com](mailto:kosuke.minamoto.s8[at]gmail.com)

## To Do

- [ ] `dat` ファイルの観測点順が逆の場合でもうまくいくようにする
- [ ] `.DS_Store`に反応しないように
